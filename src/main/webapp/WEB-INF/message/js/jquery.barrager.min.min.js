!function(r){r.fn.barrager=function(e){function a(){var e=r(window).width()+500;return e>b?(b+=1,void r(i).css("margin-right",b)):(r(i).remove(),!1)}var o,t,i,n,s,d,c,g,b,v;e=r.extend({close:!0,bottom:0,max:10,speed:6,color:"#fff",old_ie_color:"#000000"},e||{}),o=(new Date).getTime(),t="barrage_"+o,i="#"+t,n=r("<div class='barrage' id='"+t+"'></div>").appendTo(r(this)),s=r(this).height()-100,d=0==e.bottom?Math.floor(Math.random()*s+40):e.bottom,n.css("bottom",d+"px"),div_barrager_box=r("<div class='barrage_box cl'></div>").appendTo(n),e.img&&(div_barrager_box.append("<a class='portrait z' href='javascript:;'></a>"),c=r("<img src='' >").appendTo(i+" .barrage_box .portrait"),c.attr("src",e.img)),div_barrager_box.append(" <div class='z p'></div>"),e.close&&div_barrager_box.append(" <div class='close z'></div>"),g=r("<a title='' href='' target='_blank'></a>").appendTo(i+" .barrage_box .p"),g.attr({href:e.href,id:e.id}).empty().append(e.info),navigator.userAgent.indexOf("MSIE 6.0")>0||navigator.userAgent.indexOf("MSIE 7.0")>0||navigator.userAgent.indexOf("MSIE 8.0")>0?g.css("color",e.old_ie_color):g.css("color",e.color),b=0,n.css("margin-right",b),v=setInterval(a,e.speed),div_barrager_box.mouseover(function(){clearInterval(v)}),div_barrager_box.mouseout(function(){v=setInterval(a,e.speed)}),r(i+".barrage .barrage_box .close").click(function(){r(i).remove()})},r.fn.barrager.removeAll=function(){r(".barrage").remove()}}(jQuery);